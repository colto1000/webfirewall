<!DOCTYPE html>
<html>

<head>
    <title>webfirewall - Home</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="../static/css/main.css" />
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
    <noscript><link rel="stylesheet" href="../static/css/noscript.css" /></noscript>
</head>

<body class="is-preload">
    
    <!-- Wrapper -->
    <div id="wrapper">
        
        <!-- Header -->
        <header id="header" class="alt">
            <h1>Admin Dashboard</h1>
        </header>
        
        <!-- Nav -->
        <nav id="nav">
            <ul>
                <!-- <li><a href="#intro" class="active">Introduction</a></li>
                <li><a href="#clusters">Clusters</a></li> -->
                <li><a href="/logout" class="button primary">Logout</a></li>
            </ul>
        </nav>
        
        <!-- Main -->
        <div id="main">
                
                <!-- Lists -->
						<section id="clusters" class="main">
							<h2><b>IPTables</b></h2>
							<div class="row">
								<div class="col-6 col-12-medium"> <!-- experiment with adding dashboard class here -->
									<div id="rules">
                                        <h3>List Rules:</h3>
                                        <ul class="alt">
                                            <li>Dolor pulvinar magna etiam.</li>
                                            <li>Sagittis sed lorem adipiscing.</li>
                                            <li>Felis enim etiam feugiat.</li>
                                            <button class="button" id="listRules">Update List</button>
                                            <script>
                                                document.getElementById('listRules').addEventListener('click', function() {
                                                    fetch('/list-rules')
                                                    .then(response => response.json())
                                                    .then(data => {
                                                        const rulesDiv = document.getElementById('rules');
                                                        rulesDiv.innerHTML = '<pre>' + JSON
                                                            
                                                            .stringify(data, null, 2) + '</pre>';
                                                        })
                                                        .catch(error => console.error('Error:', error));
                                                    });
                                            </script>
                                        </ul>
                                    </div>
                                    <div id ="blockIPdiv">
                                        <h3>Block by IP:</h3>

                                        <form id="blockIP">
                                            <label for="ip">IP Address:</label>
                                            <input type="text" id="ip" name="ip" placeholder="e.g., 192.168.1.1">
                                            <br>

                                            <label for="protocol">Protocol:</label>
                                            <select name="protocol" id="protocol">
                                                <option value="tcp">TCP</option>
                                                <option value="udp">UDP</option>
                                                <option value="icmp">ICMP</option>
                                                <!-- Add more protocols as needed -->
                                            </select>
                                            <br>

                                            <label for="srcdst">Source/Destination:</label>
                                            <select name="srcdst" id="srcdst">
                                                <option value="source">Source</option>
                                                <option value="destination">Destination</option>
                                            </select>
                                            <br>
                                    
                                            <button class="button" type="submit">Submit</button>
                                        </form>
                                    
                                        <script>
                                            document.getElementById('blockIP').addEventListener('submit', function(event) {
                                                event.preventDefault();
                                                
                                                const formData = new FormData(this);
                                                
                                                fetch('/block-ip', {
                                                    method: 'POST',
                                                    body: formData
                                                })
                                                .then(response => response.text())
                                                .then(data => {
                                                    alert('Rule added: ' + data);
                                                })
                                                .catch(error => console.error('Error:', error));
                                            });
                                        </script>
                                    </div>
								</div>
								<div class="col-6 col-12-medium">
									<div id ="blockPortdiv">
                                        <h3>Block by Port:</h3>

                                        <form id="blockPort">
                                            <label for="port">Port:</label>
                                            <input type="text" id="port" name="port" placeholder="e.g., 80">
                                            <br>
                                    
                                            <label for="protocol">Protocol:</label>
                                            <select name="protocol" id="protocol">
                                                <option value="tcp">TCP</option>
                                                <option value="udp">UDP</option>
                                                <option value="icmp">ICMP</option>
                                                <!-- Add more protocols as needed -->
                                            </select>
                                            <br>

                                            <label for="srcdst">Source/Destination:</label>
                                            <select name="srcdst" id="srcdst">
                                                <option value="source">Source</option>
                                                <option value="destination">Destination</option>
                                            </select>
                                            <br>
                                    
                                            <button class="button" type="submit">Submit</button>
                                        </form>
                                    
                                        <script>
                                            document.getElementById('blockPort').addEventListener('submit', function(event) {
                                                event.preventDefault();
                                                
                                                const formData = new FormData(this);
                                                
                                                fetch('/block-port', {
                                                    method: 'POST',
                                                    body: formData
                                                })
                                                .then(response => response.text())
                                                .then(data => {
                                                    alert('Rule added: ' + data);
                                                })
                                                .catch(error => console.error('Error:', error));
                                            });
                                        </script>
                                    </div>
									<h3>Icons</h3>
									<ul class="icons">
										<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
										<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
										<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
										<li><a href="#" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
										<li><a href="#" class="icon brands fa-dribbble"><span class="label">Dribbble</span></a></li>
									</ul>
								</div>
							</div>
						</section>
                    
                </div>
                
                <!-- Footer -->
                <footer id="footer">
                    <section>
                        <h2>Aliquam sed mauris</h2>
                        <p>Sed lorem ipsum dolor sit amet et nullam consequat feugiat consequat magna adipiscing tempus etiam dolore veroeros. eget dapibus mauris. Cras aliquet, nisl ut viverra sollicitudin, ligula erat egestas velit, vitae tincidunt odio.</p>
                        <ul class="actions">
                            <li><a href="#" class="button">Learn More</a></li>
                        </ul>
                    </section>
                    <section>
                        <h2>Etiam feugiat</h2>
                        <dl class="alt">
                            <dt>Address</dt>
                            <dd>1234 Somewhere Road &bull; Nashville, TN 00000 &bull; USA</dd>
                            <dt>Phone</dt>
                            <dd>(000) 000-0000 x 0000</dd>
                            <dt>Email</dt>
                            <dd><a href="#">information@untitled.tld</a></dd>
                        </dl>
                        <ul class="icons">
                            <li><a href="https://www.instagram.com/coltonnicholas" class="icon brands fa-instagram alt"><span class="label">Instagram</span></a></li>
                            <li><a href="https://github.com/colto1000/" class="icon brands fa-github alt"><span class="label">GitHub</span></a></li>
                        </ul>
                    </section>
                    <p class="copyright">&copy; 2024, Colton Nicholas. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
                </footer>
                
            </div>
            
            <!-- Scripts -->
            <script src="../static/js/jquery.min.js"></script>
            <script src="../static/js/jquery.scrollex.min.js"></script>
            <script src="../static/js/jquery.scrolly.min.js"></script>
            <script src="../static/js/browser.min.js"></script>
            <script src="../static/js/breakpoints.min.js"></script>
            <script src="../static/js/util.js"></script>
            <script src="../static/js/main.js"></script>
            
</body>
</html>
